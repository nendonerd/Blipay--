<html>
  <head>
    <meta charset="UTF-8">
    <style>
      /* hide input spinners */
      input[type=number]::-webkit-inner-spin-button,
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      /* some style */
      input {
        display: block;
        font-size: 1.2em;
      }
      input[type=submit] {
        /* font-size: 2em; */
        background-color: lightcoral;
        cursor: pointer;
      }
    </style>
  </head>
  <body>

    <form id='form' autocomplete="off">
      <label for="userid">收款支付宝账户userid <a href="https://www.dedemao.com/alipay/authorize_demo.php" target="_blank">如何获取？</a></label>
      <input type="number" placeholder="userid: Number" id="userid" name="data">
      <br>
      <label for="amount">收款金额</label>
      <input type="number" placeholder="amount: Number" id="amount" name="data">
      <br>
      <label for="memo">收款备注（可用作token）</label>
      <input type="text" placeholder="memo: String" id="memo" name="data">
      <br>
      <input type="submit">
    </form>

    <div id="qrcode"></div>

    <script src="./qrcode.min.js">

    </script>
    <script type="text/javascript">

      const form = document.querySelector('#form')
      const qrcode = document.querySelector('#qrcode')

      form.addEventListener('submit', e => {
        e.preventDefault()
        qrcode.innerHTML = ''
        const formdata = new FormData(form)
        const [userid, amount, memo] = formdata.getAll('data')

        const query = `alipays://platformapi/startapp?appId=20000067&url=${location.href}api/?${userid},${amount},${memo}`
        console.log(query)
        new QRCode(document.getElementById("qrcode"), query)
      })

    </script>
  </body>

</html>